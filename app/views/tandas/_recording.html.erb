<% cache(recording) do %>
  <div class="flex flex-auto py-2 gap-2 items-center overflow-hidden relative border-t border-neutral-500 last:border-b-0">
    <div class="flex flex-col items-center justify-center gap-1">
      <% popularity_level = (recording.popularity_score / 16.67).ceil %>
      <svg height="30" width="10" aria-label="Popularity" class="text-neutral-500">
        <% 6.times do |i| %>
          <rect 
          x="0" 
          y="<%= 25 - (i * 5) %>"
            width="7" 
            height="2" 
            class="<%= i < popularity_level ? 'fill-current text-neutral-400' : 'fill-current text-neutral-600' %>">
          </rect>
        <% end %>
      </svg>
    </div>
    <div class="flex flex-grow flex-col items-start text-left overflow-hidden">
      <div class="text-sm text-neutral-200 font-semibold text-nowrap" title="<%= recording.composition.title %>">
        <%= recording.composition.title %>
      </div>
      <div class="text-xs text-neutral-500 text-nowrap" title="<%= recording.orchestra.name %>">
        <%= recording.orchestra.name %>
      </div>
      <div class="text-xs text-neutral-500 text-nowrap" title="<% if recording.singers.present? %> - <%= recording.singers.map(&:name).join(', ') %><% end %>">
        <% if recording.singers.present? %>
          <%= recording.singers.map(&:name).join(", ") %>
        <% end %>
      </div>
    </div>
    <div class="text-sm text-neutral-200 text-nowrap">
      <%= recording.year %>
    </div>
  </div>
<% end %>