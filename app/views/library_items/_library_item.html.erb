<%# locals: { library_item: } %>
<div 
  id=<%= dom_id(library_item) %>
  data-sortable-handle
  data-sortable-id="<%= library_item.id %>" 
  class="flex items-stretch align-stetch bg-neutral-900 text-white rounded-sm overflow-hidden hover:bg-neutral-800 transition group"
>
  <% cache([library_item.item]) do %>
    <%= link_to library_item.item, class: "flex-1" do %>
      <div class="flex items-center gap-4">
        <% if library_item.item.image&.attached? %>
          <%= image_tag library_item.item.image, class: "w-10 aspect-square object-cover" %>
        <% end %>
        <div class="flex-1 p-2">
          <h2 class="text-xs font-medium text-white hover:text-orange-400 line-clamp-2">
            <%= library_item.item.title %>
          </h2>
        </div>
      </div>
    <% end %>
  <% end %>
  <%= form_with url: library_item_path(library_item), method: :delete do %>
    <button 
      type="submit" 
      class="h-full bg-red-600 hover:bg-red-500 text-white text-sm rounded-sm flex items-center justify-center"
    >
      <span class="hidden px-2 py-1 group-hover:block">
        <%= heroicon "trash", size: :xs %>
      </span>
    </button>
  </div>
<% end %>