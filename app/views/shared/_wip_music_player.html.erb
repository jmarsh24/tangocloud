<div data-controller="music-player" class="fixed bottom-0 left-0 w-full flex flex-col gap-4 justify-between items-center p-4 dark:bg-neutral-900 z-50" data-action="pointermove->music-player#handleHover">
  <% if recording %>
    <div data-music-player-target="container" class="relative w-full h-36 border-2 border-white rounded-lg p-2">
      <div id="hover" data-music-player-target="hover" class="absolute left-0 top-0 w-0 h-full bg-neutral-200 opacity-10 z-50"></div>
      <div id="time" data-music-player-target="time" class="absolute left-2 top-1/2 transform -translate-y-1/2 text-white text-xs p-1 rounded-sm dark:bg-neutral-900 z-50">
        0:00
      </div>
      <div id="duration" data-music-player-target="duration" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-white text-xs p-1 rounded-sm dark:bg-neutral-900 z-50">
        0:00
      </div>
    </div>
  <% end %>
  <div class="flex justify-between items-center w-full">
    <div class="flex items-center gap-4">
      <% if recording %>
        <%= image_tag public_cdn_url(recording.digital_remasters.first.album.album_art), class: "w-24 h-24 rounded-lg" %>
        <div class="flex flex-col justify-center">
          <div class="whitespace-nowrap text-lg font-semibold text-white">
            <%= recording.composition.title %>
          </div>
          <div class="whitespace-nowrap text-sm text-gray-400">
            <%= recording.orchestra.name %>
            <% if recording.singers.any? %>
              - <%= recording.singers.map(&:name).join(", ") %>
            <% end %>
          </div>
          <div class="whitespace-nowrap text-sm text-gray-400">
            <%= recording.genre.name %> - <%= recording.year %>
          </div>
        </div>
      <% end %>
    </div>
    <div class="flex items-center gap-4">
      <% if recording %>
        <audio data-music-player-target="audio" class="hidden">
          <source src=<%= url_for(recording.digital_remasters.first.audio_variants.first.audio_file) %> type="audio/mpeg" />
        </audio>
      <% end %>
      <button
          data-action="music-player#playPause"
          data-music-player-target="playButton"
          type="button"
          class="rounded bg-gray-800 px-4 py-2 text-xs font-semibold text-white shadow-sm hover:bg-gray-600"
        >
        <div data-music-player-target="playIcon" class="w-6 h-6">
          <%= heroicon("play", variant: :solid) %>
        </div>
        <div data-music-player-target="pauseIcon" class="hidden w-6 h-6">
          <%= heroicon("pause", variant: :solid ) %>
        </div>
      </button>
    </div>
  </div>
</div>
