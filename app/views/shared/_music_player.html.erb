<%# locals: (recording: nil) -%>
<% if recording %>
  <div
    data-controller="music-player"
    data-music-player-audio-url-value="<%= url_for(recording.digital_remasters.first.audio_variants.first.audio_file) %>"
    class="fixed bottom-0 left-0 w-full flex flex-col gap-4 justify-between items-center p-4 dark:bg-neutral-900 z-50"
    data-action="pointermove->music-player#handleHover mouseleave->music-player#hideHover"
  >
    <div data-music-player-target="container" class="relative w-full h-36 border-2 border-white rounded-lg p-2">
      <div data-music-player-target="hover" class="absolute left-0 top-0 w-0 h-full bg-neutral-200 opacity-10 z-50"></div>
      <div data-music-player-target="time" class="absolute left-2 top-1/2 transform -translate-y-1/2 text-white text-xs p-1 rounded-sm dark:bg-neutral-900 z-50">
        0:00
      </div>
      <div data-player-target="duration" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-white text-xs p-1 rounded-sm bg-neutral-900 z-50">
        0:00
      </div>
    </div>
    <div class="flex justify-between items-center w-full">
      <div class="flex items-center gap-4">
        <%= image_tag recording.digital_remasters.first.album.album_art, class: "w-24 h-24 rounded-lg" %>
        <div class="flex flex-col justify-center">
          <div class="whitespace-nowrap text-lg font-semibold text-white">
            <%= link_to recording.composition.title, recording, class: "hover:underline" %>
          </div>
          <div class="whitespace-nowrap text-sm text-gray-400">
            <%= link_to recording.orchestra.name, recording.orchestra, class: "hover:underline" %>
            <% if recording.singers.any? %>
              - <%= recording.singers.map(&:name).join(", ") %>
            <% end %>
          </div>
          <div class="whitespace-nowrap text-sm text-gray-400">
            <%= recording.genre.name %> - <%= recording.year %>
          </div>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <%= link_to "Queue", queue_path, class: "hover:underline", data: { turbo_frame: "modal" } %>
        <button
          data-action="player#playPause"
          type="button"
          class="rounded bg-gray-800 px-4 py-2 text-xs font-semibold text-white shadow hover:bg-gray-700"
        >
          <div data-player-target="playIcon" class="w-6 h-6">
            <%= heroicon("play", variant: :solid) %>
          </div>
          <div data-music-player-target="pauseIcon" class="hidden w-6 h-6">
            <%= heroicon("pause", variant: :solid) %>
          </div>
        </button>
      </div>
    </div>
  </div>
<% end %>